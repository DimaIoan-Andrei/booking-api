<!DOCTYPE html>
<html>
<head>
    <title>Rezervări</title>
    <!-- stil simplu pentru tabelul centralizat si elementele formularului -->
    <style>
        table { border-collapse: collapse; width: 60%; margin: auto; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #333; color: white; }
    </style>
</head>
<body>

<!-- titlu principal -->
<h2 style="text-align:center">Rezervări curente</h2>

<!-- formular pentru adăugarea unei rezervări noi -->
<h3 style="text-align:center">Adaugă rezervare</h3>
<form method="post" action="/dashboard" style="text-align:center; margin-bottom: 20px;">
    Nume: <input type="text" name="name" required>
    Cameră: <input type="text" name="room" required>
    Dată: <input type="date" name="date" required>
    <button type="submit">Adaugă</button>
</form>

<!-- formular pentru filtrare + resetare filtre -->
<h3 style="text-align:center">Filtrează căutări</h3>
<div style="text-align: center; margin-bottom: 20px;">
    <!-- formular de filtrare (GET) -->
    <form method="get" action="/dashboard" style="display: inline-block;">
        <input type="text" name="name" placeholder="Nume"/>
        <input type="text" name="room" placeholder="Camera"/>
        <input type="date" name="date"/>
        <button type="submit">Filtrează</button>
    </form>

    <!-- formular pentru resetare filtre -->
    <form method="GET" action="/dashboard" style="display: inline-block; margin-left: 10px;">
        <button type="submit">Resetează filtrele</button>
    </form>
</div>

<!-- tabelul care afișează toate rezervările sau cele filtrate -->
<table>
    <tr>
        <th>ID</th>
        <th>Nume</th>
        <th>Cameră</th>
        <th>Dată</th>
        <th>Acțiuni</th>
    </tr>
    {% for b in bookings %}
    <tr>
        <td>{{ b.id }}</td>
        <td>{{ b.name }}</td>
        <td>{{ b.room }}</td>
        <td>{{ b.date }}</td>
        <td>
            <!-- formular de stergere pentru o rezervare -->
            <form method="post" action="/delete/{{ b.id }}" style="display:inline;">
                <button type="submit" onclick="return confirm('Ești sigur că vrei să ștergi această rezervare?')">
                    Șterge
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- buton pentru exportarea rezervărilor în format XML -->
<div style="text-align: center; margin: 20px 0;">
    <a href="/bookings/xml" download>
        <button>Exportă rezervările în XML</button>
    </a>
</div>

<!-- formular pentru validarea XML și afișarea rezultatului -->
<div style="text-align: center; margin: 20px 0;">
    <form method="get" action="/dashboard">
        <input type="hidden" name="validate" value="true">
        <button type="submit">Validează XML</button>
    </form>
    {% if validation %}
    <p>
        {% if validation.valid %}
        {{ validation.message }}
        {% else %}
        {{ validation.message }}
        {% endif %}
    </p>
    {% endif %}
</div>

</body>
</html>
